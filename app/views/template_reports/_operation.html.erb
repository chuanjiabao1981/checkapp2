<% if r.state == 'unpassed' and allow? :resolves,:new , r.issue %>
<%=link_to I18n.t('views.text.handle'), 
new_issue_resolf_path(r.issue) ,
:class=>"btn btn-mini btn-blue"%>
<% end %>
<% if allow? :template_check_records,:edit , r %>
<%=link_to I18n.t('views.text.edit'), edit_template_check_record_path(r) ,:class=> "btn  btn-green btn-mini"%>
<% end %>
<% if allow? :template_check_records,:destroy ,r %>
<%=link_to I18n.t('views.text.destroy'),
template_check_record_path(r),
method: :delete ,  
confirm: I18n.t('views.text.confirm',:model => t('activerecord.models.template_check_record')) ,
:class=> "btn  btn-red btn-mini" %>
<% end %>
<% if r.state == 'unpassed' and r.issue and allow?(:resolves,:edit,r.issue.resolve) and r.issue.resolve_denied? %>
<%=link_to I18n.t('views.text.rehandle'),
edit_resolf_path(r.issue.resolve),
:class=>"btn btn-mini btn-blue"%>
<% end %>